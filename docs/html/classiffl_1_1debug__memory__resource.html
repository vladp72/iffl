<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>iffl: iffl::debug_memory_resource Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">iffl
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Implements Intrusive Flat Forward List container</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceiffl.html">iffl</a></li><li class="navelem"><a class="el" href="classiffl_1_1debug__memory__resource.html">debug_memory_resource</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classiffl_1_1debug__memory__resource-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">iffl::debug_memory_resource Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>implements std::pmr::memory_resource interface.  
 <a href="classiffl_1_1debug__memory__resource.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="iffl__allocator_8h_source.html">iffl_allocator.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for iffl::debug_memory_resource:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classiffl_1_1debug__memory__resource.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa1ba04353ef3203ca7c727b589dc1812"><td class="memItemLeft" align="right" valign="top"><a id="aa1ba04353ef3203ca7c727b589dc1812"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiffl_1_1debug__memory__resource.html#aa1ba04353ef3203ca7c727b589dc1812">~debug_memory_resource</a> () noexcept</td></tr>
<tr class="memdesc:aa1ba04353ef3203ca7c727b589dc1812"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor triggers fail fast if there are outstanding allocations. <br /></td></tr>
<tr class="separator:aa1ba04353ef3203ca7c727b589dc1812"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af91b75cb49822da3294d532962be15e4"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiffl_1_1debug__memory__resource.html#af91b75cb49822da3294d532962be15e4">get_busy_blocks_count</a> () const noexcept</td></tr>
<tr class="memdesc:af91b75cb49822da3294d532962be15e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Can be used to query number of outstanding allocations.  <a href="#af91b75cb49822da3294d532962be15e4">More...</a><br /></td></tr>
<tr class="separator:af91b75cb49822da3294d532962be15e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06cf180cf95127d21921209836475215"><td class="memItemLeft" align="right" valign="top"><a id="a06cf180cf95127d21921209836475215"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classiffl_1_1debug__memory__resource.html#a06cf180cf95127d21921209836475215">validate_no_busy_blocks</a> () const noexcept</td></tr>
<tr class="memdesc:a06cf180cf95127d21921209836475215"><td class="mdescLeft">&#160;</td><td class="mdescRight">Triggers fail fast if there are outstanding allocations. <br /></td></tr>
<tr class="separator:a06cf180cf95127d21921209836475215"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>implements std::pmr::memory_resource interface. </p>
<p>This class can be used with Polimorfic Memory Allocator. Forward Linked List has typedef for PMR called pmr_flat_forward_list.</p>
<p>Sample usage:</p>
<div class="fragment"><div class="line"><a class="code" href="classiffl_1_1debug__memory__resource.html">iffl::debug_memory_resource</a> dbg_memory_resource;</div><div class="line"><a class="code" href="classiffl_1_1flat__forward__list.html">iffl::pmr_flat_forward_list&lt;FLAT_FORWARD_LIST_TEST&gt;</a> ffl{ &amp;dbg_memory_resource };</div></div><!-- fragment --><p>Code should guarantee that memory resource is destroyed after all memory allocated from this allocator is deallocated.</p>
<p>This class provides:</p><ul>
<li>Basic buffer overrun and underrun detection by plang well knwn patters at the end and at the beginnig of the buffer. At deallocation time patterns we check that patterns did not change</li>
<li>Detection that deallocation is done using same memory resource as allocation. Allocation header contains pointer to the memory resource. At deallocation time we check that pointer matches to the object that is deallocating memoty.</li>
<li>Helps detecting when objects use memory without previously initializing it. Allocate memory is filled with value that would trigger access violation if used as a pointer without initialization</li>
<li>Basic memory leak and lifetime management issues by counting number of outstanding allocations. At memory resource destruction time we check that there are no outstanding allocations. Table below describes layout of each allocated block.</li>
</ul>
<div class="fragment"><div class="line">--------------------------------------------------------------------------------------------------------------------</div><div class="line">|<span class="keyword">sizeof</span>(size_t) bytes | pointer to | <span class="keyword">sizeof</span>(<span class="keywordtype">size_t</span>) prefix          | user data   | <span class="keyword">sizeof</span>(size_t) suffix          |</div><div class="line">|offset to the <a class="code" href="namespaceiffl.html#aca996347cdbe2a4522fca54db163341e">end</a> of | memory     | 0xBEEFABCD - allocated block   | filled with | 0xDEADABCD - allocated block   |</div><div class="line">|allocation           | resource   | 0xBEEFABCE - deallocated block | 0xFE        | 0xDEADABCE - deallocated block |</div><div class="line">--------------------------------------------------------------------------------------------------------------------</div></div><!-- fragment --> </div><h2 class="groupheader">Member Function Documentation</h2>
<a id="af91b75cb49822da3294d532962be15e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af91b75cb49822da3294d532962be15e4">&#9670;&nbsp;</a></span>get_busy_blocks_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t iffl::debug_memory_resource::get_busy_blocks_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Can be used to query number of outstanding allocations. </p>
<dl class="section return"><dt>Returns</dt><dd>number of outstanding allocations </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/<a class="el" href="iffl__allocator_8h_source.html">iffl_allocator.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
